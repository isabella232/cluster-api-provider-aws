<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="702" height="1146" contentScriptType="application/ecmascript" contentStyleType="text/css" style="width:702px;height:1146px" preserveAspectRatio="none" version="1.1" viewBox="0 0 702 1146" zoomAndPan="magnify"><defs><filter id="f1f44ellfplh5r" width="300%" height="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4" dy="4" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><ellipse cx="429.25" cy="20" fill="#000" filter="url(#f1f44ellfplh5r)" rx="10" ry="10" style="stroke:none;stroke-width:1"/><rect style="stroke:#a80036;stroke-width:1.5" width="111" height="33.969" x="373.75" y="50" fill="#FEFECE" filter="url(#f1f44ellfplh5r)" rx="12.5" ry="12.5"/><text x="383.75" y="71.139" fill="#000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="91">AWS controller</text><rect style="stroke:#a80036;stroke-width:1.5" width="211" height="47.938" x="323.75" y="103.969" fill="#FEFECE" filter="url(#f1f44ellfplh5r)" rx="12.5" ry="12.5"/><text x="333.75" y="125.107" fill="#000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="187">enqueue AWSCluster/Machine</text><text x="376.75" y="139.076" fill="#000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="105">for reconciliation</text><rect style="stroke:#a80036;stroke-width:1.5" width="127" height="33.969" x="365.75" y="171.906" fill="#FEFECE" filter="url(#f1f44ellfplh5r)" rx="12.5" ry="12.5"/><text x="375.75" y="193.045" fill="#000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="107">fetch AWSCluster</text><polygon fill="#FEFECE" points="334.25 225.875 524.25 225.875 536.25 237.875 524.25 249.875 334.25 249.875 322.25 237.875 334.25 225.875" filter="url(#f1f44ellfplh5r)" style="stroke:#a80036;stroke-width:1.5"/><text x="334.25" y="241.683" fill="#000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="190">AWSCluster has spec.IdentityRef?</text><text x="301.25" y="235.045" fill="#666" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="21">yes</text><text x="536.25" y="235.045" fill="#666" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="16">no</text><polygon fill="#FEFECE" points="136.5 259.875 367.5 259.875 379.5 271.875 367.5 283.875 136.5 283.875 124.5 271.875 136.5 259.875" filter="url(#f1f44ellfplh5r)" style="stroke:#a80036;stroke-width:1.5"/><text x="136.5" y="275.683" fill="#000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="231">Referenced object is cluster scoped CRD</text><text x="103.5" y="269.045" fill="#666" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="21">yes</text><text x="379.5" y="269.045" fill="#666" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="16">no</text><rect style="stroke:#a80036;stroke-width:1.5" width="209" height="33.969" x="10" y="293.875" fill="#FEFECE" filter="url(#f1f44ellfplh5r)" rx="12.5" ry="12.5"/><text x="20" y="315.014" fill="#000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="189">fetch cluster scoped resource</text><rect style="stroke:#a80036;stroke-width:1.5" width="204" height="47.938" x="287.5" y="293.875" fill="#FEFECE" filter="url(#f1f44ellfplh5r)" rx="12.5" ry="12.5"/><text x="297.5" y="315.014" fill="#000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="180">fetch referenced resource in</text><text x="334" y="328.982" fill="#000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="111">same namespace</text><polygon fill="#FEFECE" points="252 347.813 264 359.813 252 371.813 240 359.813 252 347.813" filter="url(#f1f44ellfplh5r)" style="stroke:#a80036;stroke-width:1.5"/><rect style="stroke:#a80036;stroke-width:1.5" width="219" height="61.906" x="142.5" y="391.813" fill="#FEFECE" filter="url(#f1f44ellfplh5r)" rx="12.5" ry="12.5"/><text x="169" y="412.951" fill="#000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="162">set or append referenced</text><text x="152.5" y="426.92" fill="#000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="199">resource as OwnerReference to</text><text x="195" y="440.889" fill="#000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="114">AWSCluster object</text><rect style="stroke:#a80036;stroke-width:1.5" width="180" height="47.938" x="162" y="522.703" fill="#FEFECE" filter="url(#f1f44ellfplh5r)" rx="12.5" ry="12.5"/><text x="172" y="543.842" fill="#000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="156">construct new credential</text><text x="226.5" y="557.811" fill="#000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="51">provider</text><rect style="stroke:#a80036;stroke-width:1.5" width="194" height="47.938" x="155" y="639.625" fill="#FEFECE" filter="url(#f1f44ellfplh5r)" rx="12.5" ry="12.5"/><text x="165" y="660.764" fill="#000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="170">store credential provider in</text><text x="233" y="674.732" fill="#000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="38">cache</text><polygon fill="#FEFECE" points="136.5 590.641 367.5 590.641 379.5 602.641 367.5 614.641 136.5 614.641 124.5 602.641 136.5 590.641" filter="url(#f1f44ellfplh5r)" style="stroke:#a80036;stroke-width:1.5"/><text x="256" y="625.779" fill="#666" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="16">no</text><text x="136.5" y="606.449" fill="#000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="231">cache contains value for provider.Hash()</text><polygon fill="#FEFECE" points="252 707.563 264 719.563 252 731.563 240 719.563 252 707.563" filter="url(#f1f44ellfplh5r)" style="stroke:#a80036;stroke-width:1.5"/><rect style="stroke:#a80036;stroke-width:1.5" width="173" height="47.938" x="165.5" y="751.563" fill="#FEFECE" filter="url(#f1f44ellfplh5r)" rx="12.5" ry="12.5"/><text x="175.5" y="772.701" fill="#000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="149">fetch cached credential</text><text x="226.5" y="786.67" fill="#000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="51">provider</text><polygon fill="#FEFECE" points="234.5 473.719 269.5 473.719 281.5 485.719 269.5 497.719 234.5 497.719 222.5 485.719 234.5 473.719" filter="url(#f1f44ellfplh5r)" style="stroke:#a80036;stroke-width:1.5"/><text x="256" y="508.857" fill="#666" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="16">no</text><text x="234.5" y="489.527" fill="#000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="35">error?</text><text x="281.5" y="482.889" fill="#666" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="21">yes</text><ellipse cx="324.5" cy="485.719" fill="#FFF" filter="url(#f1f44ellfplh5r)" rx="11" ry="11" style="stroke:#000;stroke-width:1"/><ellipse cx="324.5" cy="485.719" fill="#000" rx="6" ry="6" style="stroke:#7f7f7f;stroke-width:1"/><rect style="stroke:#a80036;stroke-width:1.5" width="170" height="47.938" x="521.5" y="259.875" fill="#FEFECE" filter="url(#f1f44ellfplh5r)" rx="12.5" ry="12.5"/><text x="533.5" y="281.014" fill="#000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="142">current mechanism for</text><text x="531.5" y="294.982" fill="#000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="150">checking session cache</text><polygon fill="#FEFECE" points="429.25 809.5 441.25 821.5 429.25 833.5 417.25 821.5 429.25 809.5" filter="url(#f1f44ellfplh5r)" style="stroke:#a80036;stroke-width:1.5"/><rect style="stroke:#a80036;stroke-width:1.5" width="212" height="117.781" x="323.25" y="853.5" fill="#FEFECE" filter="url(#f1f44ellfplh5r)" rx="12.5" ry="12.5"/><text x="342.75" y="874.639" fill="#000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="173">call STS::GetCallerIdentity():</text><text x="333.75" y="888.607" fill="#000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="187">if (awscluster.AccountID != nil</text><text x="338.75" y="902.576" fill="#000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="177">&amp;&amp; awscluster.AccountID !=</text><text x="333.25" y="916.545" fill="#000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="192">GetCallerIdentity?) then (error)</text><text x="419.25" y="930.514" fill="#000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="28">stop</text><text x="413.75" y="944.482" fill="#000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="31">endif</text><text x="335.75" y="958.451" fill="#000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="187">:update awscluster.accountID</text><rect style="stroke:#a80036;stroke-width:1.5" width="183" height="33.969" x="337.75" y="991.281" fill="#FEFECE" filter="url(#f1f44ellfplh5r)" rx="12.5" ry="12.5"/><text x="347.75" y="1012.42" fill="#000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="163">create new service clients</text><rect style="stroke:#a80036;stroke-width:1.5" width="173" height="47.938" x="342.75" y="1045.25" fill="#FEFECE" filter="url(#f1f44ellfplh5r)" rx="12.5" ry="12.5"/><text x="352.75" y="1066.389" fill="#000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="149">reconcile AWSCluster or</text><text x="389.75" y="1080.357" fill="#000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="79">AWSMachine</text><ellipse cx="429.25" cy="1124.188" fill="#FFF" filter="url(#f1f44ellfplh5r)" rx="11" ry="11" style="stroke:#000;stroke-width:1"/><ellipse cx="429.25" cy="1124.188" fill="#000" rx="6" ry="6" style="stroke:#7f7f7f;stroke-width:1"/><line style="stroke:#666;stroke-width:1.5" x1="429.25" x2="429.25" y1="30" y2="50"/><polygon fill="#666" points="425.25 40 429.25 50 433.25 40 429.25 44" style="stroke:#666;stroke-width:1"/><line style="stroke:#666;stroke-width:1.5" x1="429.25" x2="429.25" y1="83.969" y2="103.969"/><polygon fill="#666" points="425.25 93.969 429.25 103.969 433.25 93.969 429.25 97.969" style="stroke:#666;stroke-width:1"/><line style="stroke:#666;stroke-width:1.5" x1="429.25" x2="429.25" y1="151.906" y2="171.906"/><polygon fill="#666" points="425.25 161.906 429.25 171.906 433.25 161.906 429.25 165.906" style="stroke:#666;stroke-width:1"/><line style="stroke:#666;stroke-width:1.5" x1="124.5" x2="114.5" y1="271.875" y2="271.875"/><line style="stroke:#666;stroke-width:1.5" x1="114.5" x2="114.5" y1="271.875" y2="293.875"/><polygon fill="#666" points="110.5 283.875 114.5 293.875 118.5 283.875 114.5 287.875" style="stroke:#666;stroke-width:1"/><line style="stroke:#666;stroke-width:1.5" x1="379.5" x2="389.5" y1="271.875" y2="271.875"/><line style="stroke:#666;stroke-width:1.5" x1="389.5" x2="389.5" y1="271.875" y2="293.875"/><polygon fill="#666" points="385.5 283.875 389.5 293.875 393.5 283.875 389.5 287.875" style="stroke:#666;stroke-width:1"/><line style="stroke:#666;stroke-width:1.5" x1="114.5" x2="114.5" y1="327.844" y2="359.813"/><line style="stroke:#666;stroke-width:1.5" x1="114.5" x2="240" y1="359.813" y2="359.813"/><polygon fill="#666" points="230 355.813 240 359.813 230 363.813 234 359.813" style="stroke:#666;stroke-width:1"/><line style="stroke:#666;stroke-width:1.5" x1="389.5" x2="389.5" y1="341.813" y2="359.813"/><line style="stroke:#666;stroke-width:1.5" x1="389.5" x2="264" y1="359.813" y2="359.813"/><polygon fill="#666" points="274 355.813 264 359.813 274 363.813 270 359.813" style="stroke:#666;stroke-width:1"/><line style="stroke:#666;stroke-width:1.5" x1="252" x2="252" y1="371.813" y2="391.813"/><polygon fill="#666" points="248 381.813 252 391.813 256 381.813 252 385.813" style="stroke:#666;stroke-width:1"/><line style="stroke:#666;stroke-width:1.5" x1="252" x2="252" y1="614.641" y2="639.625"/><polygon fill="#666" points="248 629.625 252 639.625 256 629.625 252 633.625" style="stroke:#666;stroke-width:1"/><line style="stroke:#666;stroke-width:1.5" x1="379.5" x2="391.5" y1="602.641" y2="602.641"/><polygon fill="#666" points="387.5 653.594 391.5 663.594 395.5 653.594 391.5 657.594" style="stroke:#666;stroke-width:1.5"/><line style="stroke:#666;stroke-width:1.5" x1="391.5" x2="391.5" y1="602.641" y2="719.563"/><line style="stroke:#666;stroke-width:1.5" x1="391.5" x2="264" y1="719.563" y2="719.563"/><polygon fill="#666" points="274 715.563 264 719.563 274 723.563 270 719.563" style="stroke:#666;stroke-width:1"/><line style="stroke:#666;stroke-width:1.5" x1="252" x2="252" y1="687.563" y2="707.563"/><polygon fill="#666" points="248 697.563 252 707.563 256 697.563 252 701.563" style="stroke:#666;stroke-width:1"/><line style="stroke:#666;stroke-width:1.5" x1="252" x2="252" y1="570.641" y2="590.641"/><polygon fill="#666" points="248 580.641 252 590.641 256 580.641 252 584.641" style="stroke:#666;stroke-width:1"/><line style="stroke:#666;stroke-width:1.5" x1="252" x2="252" y1="731.563" y2="751.563"/><polygon fill="#666" points="248 741.563 252 751.563 256 741.563 252 745.563" style="stroke:#666;stroke-width:1"/><line style="stroke:#666;stroke-width:1.5" x1="252" x2="252" y1="497.719" y2="522.703"/><polygon fill="#666" points="248 512.703 252 522.703 256 512.703 252 516.703" style="stroke:#666;stroke-width:1"/><line style="stroke:#666;stroke-width:1.5" x1="281.5" x2="313.5" y1="485.719" y2="485.719"/><polygon fill="#666" points="303.5 481.719 313.5 485.719 303.5 489.719 307.5 485.719" style="stroke:#666;stroke-width:1"/><line style="stroke:#666;stroke-width:1.5" x1="252" x2="252" y1="799.5" y2="821.5"/><line style="stroke:#666;stroke-width:1.5" x1="252" x2="417.25" y1="821.5" y2="821.5"/><polygon fill="#666" points="407.25 817.5 417.25 821.5 407.25 825.5 411.25 821.5" style="stroke:#666;stroke-width:1"/><line style="stroke:#666;stroke-width:1.5" x1="252" x2="252" y1="453.719" y2="473.719"/><polygon fill="#666" points="248 463.719 252 473.719 256 463.719 252 467.719" style="stroke:#666;stroke-width:1"/><line style="stroke:#666;stroke-width:1.5" x1="322.25" x2="252" y1="237.875" y2="237.875"/><line style="stroke:#666;stroke-width:1.5" x1="252" x2="252" y1="237.875" y2="259.875"/><polygon fill="#666" points="248 249.875 252 259.875 256 249.875 252 253.875" style="stroke:#666;stroke-width:1"/><line style="stroke:#666;stroke-width:1.5" x1="536.25" x2="606.5" y1="237.875" y2="237.875"/><line style="stroke:#666;stroke-width:1.5" x1="606.5" x2="606.5" y1="237.875" y2="259.875"/><polygon fill="#666" points="602.5 249.875 606.5 259.875 610.5 249.875 606.5 253.875" style="stroke:#666;stroke-width:1"/><line style="stroke:#666;stroke-width:1.5" x1="606.5" x2="606.5" y1="307.813" y2="821.5"/><line style="stroke:#666;stroke-width:1.5" x1="606.5" x2="441.25" y1="821.5" y2="821.5"/><polygon fill="#666" points="451.25 817.5 441.25 821.5 451.25 825.5 447.25 821.5" style="stroke:#666;stroke-width:1"/><line style="stroke:#666;stroke-width:1.5" x1="429.25" x2="429.25" y1="205.875" y2="225.875"/><polygon fill="#666" points="425.25 215.875 429.25 225.875 433.25 215.875 429.25 219.875" style="stroke:#666;stroke-width:1"/><line style="stroke:#666;stroke-width:1.5" x1="429.25" x2="429.25" y1="833.5" y2="853.5"/><polygon fill="#666" points="425.25 843.5 429.25 853.5 433.25 843.5 429.25 847.5" style="stroke:#666;stroke-width:1"/><line style="stroke:#666;stroke-width:1.5" x1="429.25" x2="429.25" y1="971.281" y2="991.281"/><polygon fill="#666" points="425.25 981.281 429.25 991.281 433.25 981.281 429.25 985.281" style="stroke:#666;stroke-width:1"/><line style="stroke:#666;stroke-width:1.5" x1="429.25" x2="429.25" y1="1025.25" y2="1045.25"/><polygon fill="#666" points="425.25 1035.25 429.25 1045.25 433.25 1035.25 429.25 1039.25" style="stroke:#666;stroke-width:1"/><line style="stroke:#666;stroke-width:1.5" x1="429.25" x2="429.25" y1="1093.188" y2="1113.188"/><polygon fill="#666" points="425.25 1103.188 429.25 1113.188 433.25 1103.188 429.25 1107.188" style="stroke:#666;stroke-width:1"/></g></svg>